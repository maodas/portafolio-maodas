---
// ================= COMPONENTE HEADER CORREGIDO =================
// PropÃ³sito: Barra de navegaciÃ³n con logo y menÃº
// NOTA: En Astro, usamos event listeners en JavaScript vanilla
//       no onClick de React

// Enlaces de navegaciÃ³n - ahora es un array de JavaScript normal
const navItems = [
  { name: 'Inicio', href: '/' },
  { name: 'Sobre mÃ­', href: '/#about' },
  { name: 'Experiencia', href: '/#experience' },
  { name: 'Portafolio', href: '/portfolio' },
  { name: 'Blog', href: '/blog' },
  { name: 'Contacto', href: '/#contact' },
];
---

<header class="sticky top-0 z-50 bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-800">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      
      <!-- Logo -->
      <div class="flex items-center">
        <a href="/" class="flex items-center space-x-3">
          <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center">
            <span class="text-white font-bold text-lg">MR</span>
          </div>
          <div>
            <div class="text-xl font-bold text-gray-900 dark:text-white">Marcos Rodas.online</div>
            <div class="text-xs text-gray-500 dark:text-gray-400">Portafolio Digital</div>
          </div>
        </a>
      </div>

      <!-- NavegaciÃ³n Desktop -->
      <nav class="hidden md:flex items-center space-x-8">
        {navItems.map((item) => (
          <a
            href={item.href}
            class="text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors font-medium py-2 relative group"
          >
            {item.name}
            <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-blue-600 group-hover:w-full transition-all duration-300"></span>
          </a>
        ))}
        
        <!-- BotÃ³n toggle tema -->
        <button 
          id="themeToggle"
          class="ml-4 p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"
          aria-label="Cambiar tema"
        >
          <span id="themeIcon">ðŸŒ™</span>
        </button>
      </nav>

      <!-- BotÃ³n menÃº mÃ³vil -->
      <div class="md:hidden flex items-center space-x-4">
        <!-- BotÃ³n toggle tema -->
        <button 
          id="themeToggleMobile"
          class="p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"
          aria-label="Cambiar tema"
        >
          <span id="themeIconMobile">ðŸŒ™</span>
        </button>
        
        <!-- BotÃ³n menÃº hamburguesa -->
        <button 
          id="menuToggle"
          class="p-2 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"
          aria-label="Abrir menÃº"
        >
          <span id="menuIcon">â˜°</span>
        </button>
      </div>
    </div>

    <!-- MenÃº mÃ³vil (oculto por defecto) -->
    <div id="mobileMenu" class="md:hidden border-t border-gray-200 dark:border-gray-800 py-4 hidden">
      <div class="flex flex-col space-y-3">
        {navItems.map((item) => (
          <a
            href={item.href}
            class="text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 py-2 px-4 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg transition-colors"
          >
            {item.name}
          </a>
        ))}
      </div>
    </div>
  </div>
</header>

<script>
  // ================= SCRIPT PARA INTERACTIVIDAD =================
  // En Astro, usamos JavaScript vanilla para interactividad
  
  // 1. Toggle de tema oscuro/claro
  function setupThemeToggle() {
    const themeToggle = document.getElementById('themeToggle');
    const themeToggleMobile = document.getElementById('themeToggleMobile');
    const themeIcon = document.getElementById('themeIcon');
    const themeIconMobile = document.getElementById('themeIconMobile');
    
    const toggleTheme = () => {
      if (document.documentElement.classList.contains('dark')) {
        document.documentElement.classList.remove('dark');
        localStorage.theme = 'light';
        themeIcon.textContent = 'ðŸŒ™';
        themeIconMobile.textContent = 'ðŸŒ™';
      } else {
        document.documentElement.classList.add('dark');
        localStorage.theme = 'dark';
        themeIcon.textContent = 'â˜€ï¸';
        themeIconMobile.textContent = 'â˜€ï¸';
      }
    };
    
    if (themeToggle) themeToggle.addEventListener('click', toggleTheme);
    if (themeToggleMobile) themeToggleMobile.addEventListener('click', toggleTheme);
    
    // Inicializar tema desde localStorage
    if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      document.documentElement.classList.add('dark');
      themeIcon.textContent = 'â˜€ï¸';
      themeIconMobile.textContent = 'â˜€ï¸';
    }
  }
  
  // 2. Toggle de menÃº mÃ³vil
  function setupMobileMenu() {
    const menuToggle = document.getElementById('menuToggle');
    const mobileMenu = document.getElementById('mobileMenu');
    const menuIcon = document.getElementById('menuIcon');
    
    if (menuToggle && mobileMenu) {
      menuToggle.addEventListener('click', () => {
        const isHidden = mobileMenu.classList.contains('hidden');
        if (isHidden) {
          mobileMenu.classList.remove('hidden');
          menuIcon.textContent = 'âœ•';
        } else {
          mobileMenu.classList.add('hidden');
          menuIcon.textContent = 'â˜°';
        }
      });
      
      // Cerrar menÃº al hacer clic en un enlace
      mobileMenu.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => {
          mobileMenu.classList.add('hidden');
          menuIcon.textContent = 'â˜°';
        });
      });
    }
  }
  
  // 3. Smooth scroll para enlaces internos
  function setupSmoothScroll() {
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        const href = this.getAttribute('href');
        // Solo aplicar smooth scroll a enlaces internos (que no sean # solo)
        if (href !== '#') {
          e.preventDefault();
          const target = document.querySelector(href);
          if (target) {
            target.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
            
            // Cerrar menÃº mÃ³vil si estÃ¡ abierto
            const mobileMenu = document.getElementById('mobileMenu');
            const menuIcon = document.getElementById('menuIcon');
            if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
              mobileMenu.classList.add('hidden');
              if (menuIcon) menuIcon.textContent = 'â˜°';
            }
          }
        }
      });
    });
  }
  
  // Ejecutar cuando el DOM estÃ© listo
  document.addEventListener('DOMContentLoaded', () => {
    setupThemeToggle();
    setupMobileMenu();
    setupSmoothScroll();
  });
  
  // TambiÃ©n ejecutar si el script se carga despuÃ©s del DOM
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
      setupThemeToggle();
      setupMobileMenu();
      setupSmoothScroll();
    });
  } else {
    setupThemeToggle();
    setupMobileMenu();
    setupSmoothScroll();
  }
</script>